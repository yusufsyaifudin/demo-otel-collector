apiVersion: v1
kind: Pod
metadata:
  name: demo-otel-collector-dd-sdk
spec:
  containers:
    - name: dd-sdk
      image: ghcr.io/yusufsyaifudin/demo-otel-collector:dd-sdk-sha-6698857
      imagePullPolicy: IfNotPresent
      env:
        - name: PORT
          value: ":8081"
        # Must expose port 8125 for the agent to send traces, and port 8126 for statsd.
        - name: DATADOG_AGENT_HOST
          value: "datadog-apm.datadog.svc"
      ports:
        - name: dd-sdk-http
          containerPort: 8081
          hostPort: 8081
          protocol: TCP
  restartPolicy: Always

---
apiVersion: v1
kind: Pod
metadata:
  name: demo-otel-collector-otel-sdk
spec:
  containers:
    - name: otel-sdk
      image: ghcr.io/yusufsyaifudin/demo-otel-collector:otel-sdk-sha-6698857
      imagePullPolicy: IfNotPresent
      env:
        - name: PORT
          value: ":8082"
        # Must be an HTTP endpoint
        - name: OTEL_EXPORTER_OTLP_ENDPOINT
          value: "opentelemetry-collector.otel-collector.svc:4318"
      ports:
        - name: otel-sdk-http
          containerPort: 8082
          hostPort: 8082
          protocol: TCP
  restartPolicy: Always
